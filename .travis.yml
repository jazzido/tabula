sudo: false
language: java
addons:
  chrome: stable
before_install:
  - gem update --system
  - google-chrome-stable --headless --disable-gpu --remote-debugging-port=9292 http://localhost &
  # google chrome standalone driver
  - wget http://chromedriver.storage.googleapis.com/2.37/chromedriver_linux64.zip
  - unzip chromedriver_linux64.zip
  - sudo mv chromedriver /usr/local/bin
  - sudo chmod a+x /usr/local/bin/chromedriver
  # download and use jruby
  - wget https://repo1.maven.org/maven2/org/jruby/jruby-dist/9.1.16.0/jruby-dist-9.1.16.0-bin.zip
  - unzip jruby-dist-9.1.16.0-bin.zip
  - sudo mv jruby-9.1.16.0 ~/
  - export PATH=~/jruby-9.1.16.0/bin:$PATH

install:
  - mvn install -DskipTests=true -Dmaven.javadoc.skip=true -Dgpg.skip=true -B -V
  # start the server
  - git clone https://github.com/redmyers/484_P7_1-GUI.git
  - git checkout origin/Header_Addition
  - export PATH=~/jruby-9.1.16.0/bin:$PATH
  - gem install bundler
  - bundle install
  - gem install jbundler
    - bundle update jar-dependencies
  - jruby -S jbundle install
  - jbundle update
  - jruby -G -r jbundler -S rackup
jdk:
  - openjdk8
  - oraclejdk8
script:
  - mvn test -Dgpg.skip=true
notifications:
  email: false

